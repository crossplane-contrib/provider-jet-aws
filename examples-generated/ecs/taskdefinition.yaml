apiVersion: ecs.aws.jet.crossplane.io/v1alpha1
kind: TaskDefinition
metadata:
  name: example
spec:
  forProvider:
    containerDefinitions: |-
      ${jsonencode([
          {
            name      = "first"
            image     = "service-first"
            cpu       = 10
            memory    = 512
            essential = true
            portMappings = [
              {
                containerPort = 80
                hostPort      = 80
              }
            ]
          },
          {
            name      = "second"
            image     = "service-second"
            cpu       = 10
            memory    = 256
            essential = true
            portMappings = [
              {
                containerPort = 443
                hostPort      = 443
              }
            ]
          }
        ])}
    family: service
    placementConstraints:
    - expression: attribute:ecs.availability-zone in [us-west-2a, us-west-2b]
      type: memberOf
    volume:
    - hostPath: /ecs/service-storage
      name: service-storage
  providerConfigRef:
    name: example
